<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧪 Test Firebase - JJXCAPITAL ⚡</title>
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background: #0D0D0D;
            color: #FFFFFF;
            padding: 40px;
            text-align: center;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #1a1a1a;
            padding: 40px;
            border-radius: 12px;
        }
        button {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #E6C200;
            transform: translateY(-2px);
        }
        .test-btn {
            background: #4CAF50;
            color: white;
        }
        .test-btn:hover {
            background: #45a049;
        }
        h1 {
            color: #FFD700;
            margin-bottom: 20px;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="font-size: 60px;">⚡</div>
        <h1>JJXCAPITAL ⚡</h1>
        <h2>Test Firebase Connection</h2>
        
        <div id="status" class="status" style="display:none;"></div>
        
        <button class="test-btn" onclick="testFirebaseAnonymous()">
            🧪 Probar Login Anónimo
        </button>
        
        <button onclick="testFirebaseConfig()">
            🔍 Verificar Configuración
        </button>
        
        <button onclick="testAnalytics()">
            📊 Test Analytics
        </button>
        
        <div id="user-info" style="margin-top: 20px; display: none;">
            <h3>Usuario Conectado:</h3>
            <p id="user-details"></p>
            <button onclick="signOutUser()" style="background: #f44336;">
                🚪 Cerrar Sesión
            </button>
        </div>
    </div>

    <!-- Firebase CDN - Tu configuración exacta -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC2ehh6VGue2Rme9wvB1LspxNiTVqEAXpk",
            authDomain: "jjxcapital-bf5a6.firebaseapp.com",
            projectId: "jjxcapital-bf5a6",
            storageBucket: "jjxcapital-bf5a6.firebasestorage.app",
            messagingSenderId: "338896648629",
            appId: "1:338896648629:web:2eb766cace7454099141fc",
            measurementId: "G-XED5HH0YEF"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);

        // Make functions global for onclick handlers
        window.testFirebaseAnonymous = async function() {
            const statusDiv = document.getElementById('status');
            statusDiv.style.display = 'block';
            statusDiv.className = 'status';
            statusDiv.textContent = '🔄 Conectando...';
            
            try {
                const result = await signInAnonymously(auth);
                statusDiv.className = 'status success';
                statusDiv.textContent = '✅ Firebase Conectado - Login Anónimo Exitoso!';
                console.log('Firebase Auth:', result);
            } catch (error) {
                statusDiv.className = 'status error';
                statusDiv.textContent = `❌ Error Firebase: ${error.code} - ${error.message}`;
                console.error('Firebase Error:', error);
            }
        };

        window.testFirebaseConfig = function() {
            const statusDiv = document.getElementById('status');
            statusDiv.style.display = 'block';
            statusDiv.className = 'status success';
            statusDiv.innerHTML = `
                ✅ Configuración Firebase Cargada:<br>
                📱 Project ID: ${firebaseConfig.projectId}<br>
                🔑 Auth Domain: ${firebaseConfig.authDomain}<br>
                📊 Analytics: ${analytics ? 'Habilitado' : 'Deshabilitado'}
            `;
        };

        window.testAnalytics = function() {
            const statusDiv = document.getElementById('status');
            statusDiv.style.display = 'block';
            
            if (analytics) {
                statusDiv.className = 'status success';
                statusDiv.textContent = '✅ Firebase Analytics inicializado correctamente';
            } else {
                statusDiv.className = 'status error';
                statusDiv.textContent = '❌ Firebase Analytics no está disponible';
            }
        };

        window.signOutUser = async function() {
            try {
                await signOut(auth);
            } catch (error) {
                console.error('Sign out error:', error);
            }
        };

        // Monitor auth state
        onAuthStateChanged(auth, (user) => {
            const userInfo = document.getElementById('user-info');
            const userDetails = document.getElementById('user-details');
            
            if (user) {
                userInfo.style.display = 'block';
                userDetails.innerHTML = `
                    🆔 UID: ${user.uid}<br>
                    👤 Anónimo: ${user.isAnonymous ? 'Sí' : 'No'}<br>
                    📧 Email: ${user.email || 'N/A'}<br>
                    ⏰ Creado: ${new Date(user.metadata.creationTime).toLocaleString()}
                `;
            } else {
                userInfo.style.display = 'none';
            }
        });

        console.log('🚀 Firebase Test Page Loaded');
        console.log('📱 Project:', firebaseConfig.projectId);
        console.log('🔥 Firebase App:', app);
        console.log('📊 Analytics:', analytics);
        console.log('🔐 Auth:', auth);
    </script>
</body>
</html>